<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // 把小娜看成对象
    // 分析小娜的特征和行为
    // 特征:无
    // 行为:询问  退出(无法写进行为) 计算总和 获取日期  讲笑话  听不懂

    // 构造小娜函数
    function xiaoNa() {
        // 封装询问
        this.ask = function () {
            var msg = prompt('我是传智小娜,你的语音助手\n' +
                '输入编号或<关键词>选择服务,输入q选择退出\n' +
                '1.计算<总和>\n' +
                '2.获取<时间>\n' +
                '3.讲<笑话>');
            return msg;
        }
        // 计算总和
        this.account = function () {
            // 弹出输入框让用户输入
            var numbers = prompt('请输入要求和数字,用逗号隔开,如:1,2,3,4');
            console.log(numbers);
            // 把输入的数字用逗号隔开
            var arr = numbers.split(',');
            // 求和
            var sum = 0;
            for (var i = 0; i < arr.length; i++) {
                sum += parseFloat(arr[i]);
            }
            return sum;
        }

        // 获得时间的功能
        this.getDate = function () {
            var date = new Date();
            var year = date.getFullYear();
            var month = date.getMonth() + 1;
            var day = date.getDate();
            var hour = date.getHours();
            var minute = date.getMinutes();
            var second = date.getSeconds();
            // 三元表达式,判断是否<10,然后+0
            month = month < 10 ? '0' + month : month;
            day = day < 10 ? '0' + day : day;
            hour = hour < 10 ? '0' + hour : hour;
            minute = minute < 10 ? '0' + minute : minute;
            second = second < 10 ? '0' + second : second;
            var time = year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;
            alert(time);
        }

        // 讲笑话功能
        this.talkJoke = function () {
            var joke = ['笑话1', '笑话2', '笑话3', '笑话4', '笑话5'];
            var r = Math.floor(Math.random() * joke.length);
            alert(joke[r]);
        }

        // 听不清
        this.unknow = function () {
            alert('您的话小娜没听懂,please again');
        }
    }

    var xiaoNa = new xiaoNa;
    while (true) {
        // 询问功能
        var msg = xiaoNa.ask();
        // 退出功能
        if (msg === 'q') {
            alert('下次再见');
            break;
        }
        switch (msg) {
            // 求和功能
            case '1':
            case '总和':
                var sum = xiaoNa.account();
                alert('你要的总和是:' + sum);
                break;

            // 获取当前时间
            case '2':
            case '时间':
                xiaoNa.getDate();
                break;

            // 讲笑话功能
            case '3':
            case '笑话':
                xiaoNa.talkJoke();
                break;

            // 不知道听不清功能
            default:
                xiaoNa.unknow();
                break;
        }
    }
</script>

</html>